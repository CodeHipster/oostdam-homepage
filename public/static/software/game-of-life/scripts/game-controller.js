// Generated by CoffeeScript 2.5.1
(function() {
  //TODO: cleanup define includes.
  define(['grid', 'game-of-life', 'grid-visualizer', 'timer'], function(grid, GameOfLife, gridVisualizer, timer) {
    var gameController, moduleName;
    moduleName = "game-controller";
    console.log(moduleName);
    gameController = {
      iterationsPerSecond: 5,
      paused: true,
      setupAndRun: function() {
        var logicloop, renderloop;
        console.log(moduleName, "setup and run");
        // Set initial cells TEMP
        //[x][x][o]
        //[o][x][o]
        //[x][o][o]
        grid.front[2][0] = true;
        grid.front[0][1] = true;
        grid.front[2][1] = true;
        grid.front[1][2] = true;
        grid.front[2][2] = true;
        console.log(moduleName, "starting grid:", grid.front);
        renderloop = function() {
          //console.log moduleName, "grid:", grid.front
          return gridVisualizer.render(grid.front, canvas);
        };
        logicloop = function() {
          if (!gameController.paused) {
            // Run game of life logic once on the grid.
            return GameOfLife.doLogic(grid);
          }
        };
        timer.runAtInterval(200, logicloop);
        return timer.runAtInterval(33, renderloop);
      }
    };
    console.log("gamecontroller:", gameController);
    return gameController;
  });

}).call(this);
